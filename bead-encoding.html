<style>
  [data-placeholder]:empty:not(:focus):before {
      content: attr(data-placeholder);
      color: var(--color-grey);
      font-style: italic;
    }
</style>

<h1>Bead Encoding</h1>

<label for="text-input">Text Input</label>
<input id="text-input" placeholder="Enter Text">
<hr>
<label for="text-output">Encoded Output</label>
<pre><output id="text-output" name="text-output" for="text-input" data-placeholder="Output"></output></pre>

<script>
  (function() {
    'use strict'

    const beadsByLetter = new Map([['0','‚ö™‚ö™‚ö™'],
      ['A','‚ö™‚ö™üî¥'],['B','‚ö™‚ö™‚ö´'],['C','‚ö™üî¥‚ö™'],
      ['D','‚ö™üî¥üî¥'],['E','‚ö™üî¥‚ö´'],['F','‚ö™‚ö´‚ö™'],
      ['G','‚ö™‚ö´üî¥'],['H','‚ö™‚ö´‚ö´'],['I','üî¥‚ö™‚ö™'],
      ['J','üî¥‚ö™üî¥'],['K','üî¥‚ö™‚ö´'],['L','üî¥üî¥‚ö™'],
      ['M','üî¥üî¥üî¥'],['N','üî¥üî¥‚ö´'],['O','üî¥‚ö´‚ö™'],
      ['P','üî¥‚ö´üî¥'],['Q','üî¥‚ö´‚ö´'],['R','‚ö´‚ö™‚ö™'],
      ['S','‚ö´‚ö™üî¥'],['T','‚ö´‚ö™‚ö´'],['U','‚ö´üî¥‚ö™'],
      ['V','‚ö´üî¥üî¥'],['W','‚ö´üî¥‚ö´'],['X','‚ö´‚ö´‚ö™'],
      ['Y','‚ö´‚ö´üî¥'],['Z','‚ö´‚ö´‚ö´']])
    const valuesByNumeral = {M:1000,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}
    const morseByCharacter = new Map(Object.entries({' ':'/', 'A':'.-','B':'-...','C':'-.-.','D':'-..','E':'.',
    'F':'..-.','G':'--.','H':'....','I':'..','J':'.---','K':'-.-','L':'.-..','M':'--','N':'-.','O':'---',
    'P':'.--.','Q':'--.-','R':'.-.','S':'...','T':'-','U':'..-','V':'...-','W':'.--','X':'-..-','Y':'-.--',
    'Z':'--..','0':'-----','1':'.----','2':'..---','3':'...--','4':'....-','5':'.....','6':'-....','7':'--...',
    '8':'---..','9':'----.'}))
    const morseBeadByCharacter = new Map(Object.entries({'A':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','B':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','C':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','D':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','E':'‚óºÔ∏è',
    'F':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','G':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','H':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','I':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','J':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','K':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','L':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','M':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','N':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','O':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è',
    'P':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','Q':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','R':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','S':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','T':'‚óºÔ∏è‚óºÔ∏è','U':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','V':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','W':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','X':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','Y':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è',
    'Z':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','0':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','1':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','2':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','3':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','4':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è','5':'‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','6':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','7':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è',
    '8':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è','9':'‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è‚óºÔ∏è‚óªÔ∏è‚óºÔ∏è'}))

    function toRomanNumerals(num) {
      if (Number(num) === 0)
        return '0'
      let str = ''
      for (let numeral of Object.keys(valuesByNumeral)) {
        let repeatCount = Math.floor(num / valuesByNumeral[numeral])
        num -= repeatCount * valuesByNumeral[numeral]
        str += numeral.repeat(repeatCount)
      }
      return str
    }

    const input = document.body.querySelector('#text-input')
    const output = document.body.querySelector('#text-output')

    input.addEventListener('input', () => {
      if (input.value === '') {
        output.value = '\n'
        return
      }

      const filtered = input.value.toUpperCase().replaceAll(/[^A-Z0-9 ]/g, '')
      const romanized = filtered.replaceAll(/[0-9]+/g, m => toRomanNumerals(m)).replaceAll(' ', '')
      const base3Beads = ['E','0',...romanized].map(c => beadsByLetter.get(c)).join('\n')
      const morsed = Array.from(filtered).map(c => morseByCharacter.get(c)).join(' ')
      const morseBeads = filtered.split(' ').map(word => Array.from(word).map(char => morseBeadByCharacter.get(char)).join('‚óªÔ∏è‚óªÔ∏è')).join('‚óªÔ∏è‚óªÔ∏è‚óªÔ∏è')

      output.value = `Filtered: ${filtered}`
      output.value += `\nRomanized: ${romanized}`
      output.value += `\nBase3 Beads (len=${romanized.length * 3 + 6}):\n${base3Beads}`
      output.value += `\nMorse (len=${morsed.length}):\n${morsed}`
      output.value += `\nMorse Beads (len=${morseBeads.length/2}):\n${morseBeads}`
      output.value += '\n'
    })
  })()
</script>
